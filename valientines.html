<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romantic Flower ‚Äî Envelope with Perfect Visible Flowers</title>
    <style>
        /* ---------- ORIGINAL STYLES (COMPLETELY PRESERVED) ---------- */
        body {
            margin: 0;
            padding: 0;
            background: #0a0a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }
        .canvas-wrap {
            position: relative;
            width: min(95vw, 700px);
            aspect-ratio: 1/1;
            height: auto;
        }
        canvas {
            display: block;
            background: #0e0e1a;
            box-shadow: 0 0 150px rgba(255, 105, 180, 0.3);
            border-radius: 30px;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .overlay text {
            font-weight: 700;
            text-shadow: 0 2px 6px rgba(0,0,0,0.45);
        }
        .overlay .name {
            opacity: 0;
            transform-origin: 50% 83%;
            transform: translateY(12px) scale(0.98);
            animation: nameIn 900ms cubic-bezier(.2,.9,.2,1) 800ms forwards, nameFloat 4s ease-in-out 2s infinite;
            fill: #ffd1e6;
            font-weight: 700;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.45));
        }
            .overlay .headline,
            .overlay .question {
                opacity: 0;
                transform: translateY(-10px) scale(0.98);
                transition: opacity 700ms ease, transform 700ms cubic-bezier(.2,.9,.2,1);
            }
            .overlay .headline.visible,
            .overlay .question.visible {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        @keyframes nameIn { to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes nameFloat { 0% { transform: translateY(0); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0); } }

        /* ---------- ADDED INTERACTIVE LAYER (10‚ÄëSECOND FADE) ---------- */
        .proposal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.2s ease-in-out;
            background: rgba(10, 8, 20, 0.75);
            backdrop-filter: blur(4px);
            border-radius: 30px;
            box-shadow: inset 0 0 80px rgba(255, 105, 180, 0.3);
            z-index: 25;
        }
        .proposal-overlay.show {
            opacity: 1;
            pointer-events: all;
        }
        .proposal-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        /* ---------- üíå MASTERPIECE ENVELOPE ‚Äì FLOWERS 100% VISIBLE, NO BACKGROUND ISSUES ---------- */
        .mail-envelope {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 300px;
            height: 220px;
            background: #fbe6ce;
            background: radial-gradient(circle at 20% 30%, #ffefd2, #f2cfb0);
            border: none;
            border-radius: 20px 20px 25px 25px;
            box-shadow: 
                0 40px 60px -8px rgba(0,0,0,0.7),
                0 20px 35px rgba(0,0,0,0.4),
                0 0 0 2px rgba(255, 230, 200, 0.9),
                0 0 0 6px rgba(170, 100, 60, 0.3),
                0 0 0 10px rgba(255, 215, 180, 0.15),
                0 0 35px rgba(255, 105, 180, 0.2);
            cursor: pointer;
            transition: transform 0.6s cubic-bezier(0.34, 1.5, 0.64, 1), opacity 0.4s ease, box-shadow 0.3s ease;
            z-index: 40;
            opacity: 0;
            overflow: visible;
        }
        .mail-envelope.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        .mail-envelope:hover {
            box-shadow: 
                0 50px 70px -5px rgba(0,0,0,0.8),
                0 25px 40px rgba(0,0,0,0.5),
                0 0 0 2px rgba(255, 230, 200, 0.95),
                0 0 0 6px rgba(170, 100, 60, 0.35),
                0 0 0 10px rgba(255, 215, 180, 0.2),
                0 0 50px rgba(255, 105, 180, 0.3);
        }
        .mail-envelope.open:hover::before {
            transform: rotateX(190deg) translateY(-15px) scaleY(1);
            box-shadow: 
                inset 0 -15px 25px -5px rgba(0,0,0,0.3),
                inset 0 4px 10px rgba(255, 255, 220, 0.8),
                0 20px 45px rgba(100, 50, 20, 0.5),
                0 0 60px rgba(255, 105, 180, 0.35);
        }

        /* üå∏ MAIN FLAP ‚Äì ELEGANT CURVE WITH GOLDEN HINT */
        .mail-envelope::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 0;
            width: 100%;
            height: 65%;
            background: #fedfc5;
            background: linear-gradient(145deg, #ffe6d5, #fbcbaa);
            clip-path: polygon(0% 0%, 100% 0%, 90% 96%, 50% 80%, 10% 96%);
            border-radius: 18px 18px 40% 40%;
            box-shadow: 
                inset 0 10px 15px -5px rgba(0,0,0,0.15),
                inset 0 -3px 5px rgba(255, 255, 200, 0.5),
                0 5px 10px rgba(100, 50, 20, 0.2);
            border-bottom: 2px solid rgba(200, 140, 80, 0.3);
            transform-origin: top;
            transition: transform 0.7s cubic-bezier(0.15, 0.8, 0.25, 1), box-shadow 0.7s ease;
            z-index: 42;
        }

        /* üíé BOTTOM SHADOW / BASE GLOW */
        .mail-envelope::after {
            content: '';
            position: absolute;
            bottom: 10px;
            left: 10%;
            width: 80%;
            height: 30px;
            background: radial-gradient(ellipse at center, rgba(120, 60, 30, 0.25) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(12px);
            z-index: 38;
        }

        /* ‚ú® DECORATIVE BORDERS ‚Äì GOLDEN FILIGREE */
        .envelope-border {
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 2px dashed rgba(200, 140, 80, 0.4);
            border-radius: 16px;
            pointer-events: none;
            z-index: 43;
        }
        .envelope-border::before {
            content: '‚úß ‚ú¶ ‚úß';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: #fbe6ce;
            color: #b57a4a;
            padding: 0 15px;
            font-size: 18px;
            letter-spacing: 8px;
            text-shadow: 0 0 4px #ffd9b0;
            font-weight: bold;
            z-index: 44;
        }

        /* üåπüå∫ DECORATIVE CORNER FLOWERS ‚Äì NOW 100% VISIBLE, NO BACKGROUND INTERFERENCE */
        .envelope-corner-flower {
            position: absolute;
            font-size: 36px;
            color: #c44a4a;
            text-shadow: 0 0 20px #ff9f7f, 0 0 35px #ffb38b, 2px 4px 8px rgba(80,20,0,0.6);
            z-index: 100;
            pointer-events: none;
            font-weight: normal;
            opacity: 1;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.4));
            /* Completely independent, no background flowers behind them */
        }
        .corner1 { 
            top: -8px; 
            left: 5px; 
            transform: rotate(-18deg); 
            color: #ff5e5e;
            font-size: 42px;
            text-shadow: 0 0 25px #ffa07a, 0 0 45px #ff6b6b;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .mail-envelope:hover .corner1 {
            transform: rotate(-18deg) scale(1.15) translateY(-3px);
            filter: drop-shadow(0 8px 12px rgba(255, 107, 107, 0.4));
        }
        .corner2 { 
            top: -8px; 
            right: 5px; 
            transform: rotate(18deg); 
            color: #ff6b6b;
            font-size: 42px;
            text-shadow: 0 0 25px #ffa07a, 0 0 45px #ff7f7f;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .mail-envelope:hover .corner2 {
            transform: rotate(18deg) scale(1.15) translateY(-3px);
            filter: drop-shadow(0 8px 12px rgba(255, 107, 107, 0.4));
        }
        .corner3 { 
            bottom: 35px; 
            left: 0px; 
            transform: rotate(-12deg); 
            color: #d44c4c;
            font-size: 46px;
            text-shadow: 0 0 30px #ffa07a, 0 0 50px #ff8f8f;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .mail-envelope:hover .corner3 {
            transform: rotate(-12deg) scale(1.12) translateY(3px);
            filter: drop-shadow(0 8px 12px rgba(212, 76, 76, 0.4));
        }
        .corner4 { 
            bottom: 35px; 
            right: 0px; 
            transform: rotate(12deg); 
            color: #d44c4c;
            font-size: 46px;
            text-shadow: 0 0 30px #ffa07a, 0 0 50px #ff8f8f;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .mail-envelope:hover .corner4 {
            transform: rotate(12deg) scale(1.12) translateY(3px);
            filter: drop-shadow(0 8px 12px rgba(212, 76, 76, 0.4));
        }

        /* ADDITIONAL SMALL FLOWERS ‚Äì EXTRA DECOR, CRYSTAL CLEAR */
        .envelope-small-flower {
            position: absolute;
            font-size: 26px;
            color: #ff7a7a;
            text-shadow: 0 0 18px #ffb3b3, 0 0 30px #ff9999, 0 0 45px #ff8080;
            z-index: 101;
            pointer-events: none;
            opacity: 1;
            filter: drop-shadow(0 3px 5px rgba(0,0,0,0.3));
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .mail-envelope:hover .envelope-small-flower {
            transform: scale(1.1);
            filter: drop-shadow(0 5px 8px rgba(0,0,0,0.4));
        }
        .small1 { top: 20px; left: 45px; transform: rotate(-25deg); font-size: 28px; }
        .small2 { top: 20px; right: 45px; transform: rotate(25deg); font-size: 28px; }
        .small3 { bottom: 70px; left: 50px; transform: rotate(15deg); font-size: 30px; }
        .small4 { bottom: 70px; right: 50px; transform: rotate(-15deg); font-size: 30px; }
        .small5 { top: 70px; left: 12px; font-size: 22px; color: #ff9d9d; }
        .small6 { top: 70px; right: 12px; font-size: 22px; color: #ff9d9d; }
        .small7 { bottom: 110px; left: 20px; font-size: 24px; color: #ff8a8a; transform: rotate(-8deg); }
        .small8 { bottom: 110px; right: 20px; font-size: 24px; color: #ff8a8a; transform: rotate(8deg); }

        /* üåπ WAX SEAL ‚Äì ROYAL, EMBOSSED, HIGHEST VISIBILITY */
        .envelope-seal {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 74px;
            height: 74px;
            background: radial-gradient(circle at 35% 35%, #ffb08a, #9e2f2f);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            box-shadow: 
                0 10px 20px rgba(60, 0, 0, 0.8),
                inset 0 -6px 10px rgba(0,0,0,0.5),
                inset 0 5px 12px rgba(255, 240, 170, 1),
                0 0 0 4px rgba(255, 215, 140, 0.6),
                0 0 0 8px rgba(180, 90, 50, 0.2);
            border: 2px solid #ffeec0;
            z-index: 110;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 44px;
            color: #fff9e6;
            text-shadow: 0 4px 8px #2a0000;
            transition: transform 0.25s ease, box-shadow 0.3s;
            cursor: pointer;
            animation: sealGlow 3s infinite alternate;
        }
        .envelope-seal:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 
                0 14px 28px rgba(120, 0, 0, 0.9),
                inset 0 -5px 10px rgba(0,0,0,0.6),
                inset 0 6px 15px #fffad9,
                0 0 0 5px rgba(255, 225, 150, 0.8);
        }
        .envelope-seal::after {
            content: "‚ù§Ô∏è";
            font-size: 48px;
            filter: drop-shadow(0 5px 6px rgba(0,0,0,0.6));
        }
        @keyframes sealGlow {
            0% { box-shadow: 0 10px 20px rgba(60,0,0,0.8), inset 0 -6px 10px rgba(0,0,0,0.5), inset 0 5px 12px rgba(255,240,170,1), 0 0 0 4px rgba(255,215,140,0.6); }
            100% { box-shadow: 0 16px 32px rgba(160,0,0,0.9), inset 0 -7px 12px rgba(0,0,0,0.6), inset 0 7px 18px #fffbe3, 0 0 0 6px rgba(255,210,120,0.9); }
        }

        /* üè∑Ô∏è ADDRESS LABEL ‚Äì HAND-LETTERED ROMANTIC */
        .envelope-address {
            position: absolute;
            bottom: 28px;
            left: 0;
            width: 100%;
            text-align: center;
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 20px;
            color: #4d2e1c;
            letter-spacing: 5px;
            font-style: italic;
            text-shadow: 0 2px 5px #ffeedd;
            opacity: 0.98;
            background: linear-gradient(90deg, transparent, rgba(255, 235, 200, 0.6), transparent);
            padding: 12px 0;
            backdrop-filter: blur(3px);
            font-weight: 600;
            border-top: 1px solid rgba(180, 110, 60, 0.5);
            border-bottom: 1px solid rgba(180, 110, 60, 0.5);
            z-index: 105;
        }
        .envelope-address span {
            display: inline-block;
            border-bottom: 2px solid #b5764a;
            padding-bottom: 6px;
            padding-left: 15px;
            padding-right: 15px;
            background: rgba(255, 255, 240, 0.4);
            border-radius: 40px;
            box-shadow: inset 0 1px 8px rgba(255,255,255,0.9);
        }

        /* ‚ú® GOLDEN DOTS ‚Äì SPARKLE, CLEARLY VISIBLE */
        .envelope-gold-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ffeaa0, #cc9f4a);
            border-radius: 50%;
            box-shadow: 0 0 22px #ffcc80, 0 0 8px #ffb84d;
            z-index: 102;
            opacity: 1;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .mail-envelope:hover .envelope-gold-dot {
            transform: scale(1.25);
            box-shadow: 0 0 30px #ffdd99, 0 0 15px #ffc64d;
        }
        .dot1 { top: 35%; left: 8%; }
        .dot2 { top: 35%; right: 8%; }
        .dot3 { bottom: 30%; left: 12%; }
        .dot4 { bottom: 30%; right: 12%; }
        .dot5 { top: 55%; left: 18%; width: 8px; height: 8px; background: #ffd98c; }
        .dot6 { top: 55%; right: 18%; width: 8px; height: 8px; background: #ffd98c; }

        /* üíå OPEN STATE ‚Äì FLAP LIFTED GRACEFULLY */
        .mail-envelope.open {
            transform: translate(-50%, -50%) scale(1);
        }
        .mail-envelope.open::before {
            transform: rotateX(190deg) translateY(-12px) scaleY(0.95);
            clip-path: polygon(0% 0%, 100% 0%, 90% 96%, 50% 80%, 10% 96%);
            background: linear-gradient(165deg, #fff5e6, #ffe8d0);
            box-shadow: 
                inset 0 -12px 20px -5px rgba(0,0,0,0.25),
                inset 0 3px 8px rgba(255, 255, 200, 0.7),
                0 15px 30px rgba(100, 50, 20, 0.4),
                0 0 40px rgba(255, 105, 180, 0.25);
        }

        /* üíå MASTERPIECE LETTER ‚Äì ANTIQUE, ORNATE, EMOTIONAL */
        .letter {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -45%) scale(0) rotateY(180deg);
            width: 260px;
            height: auto;
            max-height: 520px;
            min-height: 300px;
            background: #fffdf6;
            background: linear-gradient(145deg, #fffbf0, #fff4e7);
            border: 1px solid #e2ba9a;
            border-radius: 12px 12px 20px 20px;
            padding: 30px 28px;
            box-shadow: 
                0 25px 40px -12px rgba(60, 30, 10, 0.5),
                inset 0 0 0 1px rgba(255, 255, 250, 0.9),
                inset 0 0 30px rgba(255, 210, 170, 0.3);
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 15px;
            color: #3a2a1a;
            text-align: center;
            z-index: 150;
            opacity: 0;
            transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
            border-image: repeating-linear-gradient(45deg, #cb9e7a, #cb9e7a 8px, transparent 8px, transparent 16px) 14;
            line-height: 1.7;
            letter-spacing: 0.4px;
            backdrop-filter: blur(2px);
            cursor: pointer;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* üìú LETTER SCROLLBAR STYLING */
        .letter::-webkit-scrollbar {
            width: 6px;
        }
        .letter::-webkit-scrollbar-track {
            background: rgba(255, 200, 150, 0.1);
            border-radius: 10px;
        }
        .letter::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #d49b7a, #b57a4a);
            border-radius: 10px;
            box-shadow: 0 0 6px rgba(212, 155, 122, 0.5);
        }
        .letter::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #e8b4a0, #d49b7a);
            box-shadow: 0 0 10px rgba(212, 155, 122, 0.8);
        }
        .letter.closing {
            opacity: 0;
            transform: translate(-50%, -45%) scale(0.8) rotateY(180deg);
        }
        .letter.show {
            transform: translate(-50%, -50%) scale(1) rotateY(0deg);
            opacity: 1;
        }
        .letter.show:hover {
            box-shadow: 
                0 30px 50px -10px rgba(60, 30, 10, 0.6),
                inset 0 0 0 1px rgba(255, 255, 250, 0.95),
                inset 0 0 40px rgba(255, 210, 170, 0.4);
        }

        /* üå∏ ORNATE FLORAL CORNERS ON LETTER */
        .letter::before {
            content: "üå∑";
            position: absolute;
            top: 12px;
            left: 16px;
            font-size: 26px;
            opacity: 0.8;
            transform: rotate(-12deg);
            filter: drop-shadow(0 2px 6px rgba(200,80,50,0.4));
            color: #b34e4e;
        }
        .letter::after {
            content: "üå∫";
            position: absolute;
            bottom: 12px;
            right: 16px;
            font-size: 28px;
            opacity: 0.8;
            transform: rotate(12deg);
            filter: drop-shadow(0 2px 6px rgba(200,80,50,0.4));
            color: #b34e4e;
        }

        .letter h3 {
            margin: 0 0 15px 0;
            color: #9e3f3f;
            font-size: 26px;
            font-weight: 600;
            text-shadow: 0 2px 4px #ffe6d5;
            border-bottom: 2px solid #d49b7a;
            padding-bottom: 10px;
            font-style: italic;
            letter-spacing: 2px;
            font-family: 'Georgia', 'Times New Roman', serif;
        }

        .letter p {
            margin: 16px 0;
            text-align: left;
            text-indent: 1.2em;
            font-size: 15px;
        }

        .letter .heart-divider {
            text-align: center;
            margin: 18px 0 12px;
            color: #b35e5e;
            font-size: 20px;
            letter-spacing: 10px;
        }

        /* üíï HEART SHAPE CONTAINER WITH IMAGES */
        .letter-heart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            position: relative;
            height: 130px;
        }

        .heart-shape {
            position: relative;
            width: 140px;
            height: 140px;
            margin: 0 auto;
        }

        .heart-shape::before,
        .heart-shape::after {
            content: "";
            position: absolute;
            top: 0;
            width: 70px;
            height: 110px;
            background: rgba(255, 105, 180, 0.1);
            border-radius: 70px 70px 0 0;
            opacity: 0.3;
        }

        .heart-shape::before {
            left: 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }

        .heart-shape::after {
            right: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        .heart-images {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 110px;
            height: 110px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .heart-images .image-item {
            width: 48px;
            height: 48px;
            object-fit: cover;
            border: 2px solid #ff4d6d;
            box-shadow: 0 4px 8px rgba(60, 0, 0, 0.4);
            transition: transform 0.3s ease;
            clip-path: polygon(50% 0%, 100% 38%, 100% 100%, 50% 85%, 0% 100%, 0% 38%);
        }

        .heart-images .image-item:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(255, 105, 180, 0.4);
        }

        .letter .signature {
            margin-top: 22px;
            font-style: italic;
            text-align: right;
            font-size: 17px;
            color: #6a3f2a;
            border-top: 1px dashed #c99979;
            padding-top: 16px;
            text-indent: 0;
            font-weight: 500;
        }

        /* proposal card ‚Äî untouched */
        .proposal-card {
            background: rgba(30, 12, 30, 0.8);
            backdrop-filter: blur(8px);
            border: 1.5px solid rgba(255, 200, 220, 0.6);
            border-radius: 48px 20px 48px 20px;
            padding: 30px 40px;
            text-align: center;
            font-family: 'Georgia', 'Times New Roman', serif;
            box-shadow: 0 20px 40px rgba(255, 80, 140, 0.25);
            max-width: 70%;
            transform: scale(0.94);
            animation: cardGlow 3s infinite alternate;
        }
        .proposal-card h2 {
            font-size: 38px;
            margin: 0 0 16px 0;
            background: linear-gradient(45deg, #ffe0f0, #ffb3c6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 12px #ff4d6d;
            letter-spacing: 1.5px;
        }
        .proposal-buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-top: 10px;
        }
        .btn {
            font-size: 30px;
            font-weight: bold;
            padding: 10px 30px;
            border: none;
            border-radius: 60px;
            font-family: 'Georgia', 'Times New Roman', serif;
            cursor: pointer;
            transition: all 0.25s ease;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
            background: white;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }
        .btn-yes {
            background: #ff4d6d;
            color: white;
            box-shadow: 0 8px 0 #9f1e35;
        }
        .btn-yes:hover {
            background: #ff1a4f;
            transform: scale(1.08);
            box-shadow: 0 4px 0 #9f1e35, 0 0 25px #ff99aa;
        }
        .btn-no {
            background: #3a2a3a;
            color: #ffe2f0;
            box-shadow: 0 8px 0 #1e151e;
            border-color: #b38b9a;
        }
        .btn-no:hover {
            background: #5a3a4a;
            transform: scale(0.96);
            box-shadow: 0 4px 0 #1e151e;
        }
        .response-message {
            margin-top: 25px;
            font-size: 24px;
            min-height: 50px;
            color: #ffe6f0;
            text-shadow: 0 0 10px #ff9eb5;
            font-style: italic;
            transition: opacity 0.4s;
        }
        @keyframes cardGlow {
            0% { border-color: rgba(255, 180, 200, 0.5); box-shadow: 0 0 30px rgba(255, 105, 180, 0.3); }
            100% { border-color: rgba(255, 100, 150, 0.9); box-shadow: 0 0 60px rgba(255, 80, 140, 0.6); }
        }
        .overlay {
            pointer-events: none;
        }
        
        /* üéµ MUSIC CONTROL BUTTON */
        .music-toggle {
            position: fixed;
            bottom: 40px;
            right: 40px;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 35% 35%, #ffb08a, #9e2f2f);
            border-radius: 50%;
            border: 2px solid #ffeec0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: #fff9e6;
            box-shadow: 0 8px 20px rgba(60, 0, 0, 0.6), inset 0 2px 5px rgba(255, 255, 200, 0.8);
            transition: all 0.3s ease;
            z-index: 999;
            animation: musicGlow 2.5s infinite alternate;
        }
        .music-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(60, 0, 0, 0.8), inset 0 3px 8px rgba(255, 255, 220, 1);
        }
        .music-toggle.playing {
            background: radial-gradient(circle at 35% 35%, #ffccaa, #c41e3a);
        }
        @keyframes musicGlow {
            0% { box-shadow: 0 8px 20px rgba(60, 0, 0, 0.6), inset 0 2px 5px rgba(255, 255, 200, 0.8); }
            100% { box-shadow: 0 12px 25px rgba(100, 0, 0, 0.8), inset 0 3px 8px rgba(255, 255, 220, 1); }
        }
        
        #bgAudio {
            display: none;
        }
        
        /* üñºÔ∏è IMAGE GALLERY SECTION */
        .image-gallery {
            position: fixed;
            bottom: 120px;
            right: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 998;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
            pointer-events: none;
        }
        
        .image-gallery.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        
        .gallery-section {
            background: rgba(255, 235, 220, 0.95);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 20px rgba(60, 0, 0, 0.4);
            backdrop-filter: blur(5px);
            max-width: 180px;
            transition: all 0.3s ease;
        }
        
        .gallery-section:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(60, 0, 0, 0.6);
        }
        
        .gallery-label {
            font-family: 'Georgia', serif;
            font-size: 12px;
            color: #6a3f2a;
            text-align: center;
            margin-bottom: 10px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .image-container {
            display: flex;
            gap: 8px;
            justify-content: center;
        }
        
        .gallery-image {
            width: 70px;
            height: 70px;
            border-radius: 10px;
            object-fit: cover;
            border: 2px solid #d49b7a;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(60, 0, 0, 0.3);
        }
        
        .gallery-image:hover {
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 6px 15px rgba(60, 0, 0, 0.5);
        }
        
        /* üì± MOBILE RESPONSIVE STYLES */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .canvas-wrap {
                width: min(95vw, 500px);
                aspect-ratio: 1/1;
            }
            
            canvas {
                border-radius: 20px;
                box-shadow: 0 0 80px rgba(255, 105, 180, 0.2);
            }
            
            .overlay text {
                font-size: 20px !important;
            }
            
            .proposal-overlay {
                border-radius: 20px;
            }
            
            .proposal-card {
                max-width: 85%;
                padding: 20px 30px;
                border-radius: 30px 15px 30px 15px;
            }
            
            .proposal-card h2 {
                font-size: 28px;
                margin: 0 0 12px 0;
            }
            
            .proposal-buttons {
                gap: 15px;
            }
            
            .btn {
                font-size: 20px;
                padding: 8px 20px;
                border-radius: 50px;
            }
            
            .response-message {
                font-size: 18px;
                margin-top: 15px;
                min-height: 40px;
            }
            
            .mail-envelope {
                width: 240px;
                height: 180px;
                border-radius: 16px 16px 20px 20px;
                padding: 20px 22px;
            }
            
            .envelope-border {
                top: 4px;
                left: 4px;
                right: 4px;
                bottom: 4px;
                border-radius: 12px;
            }
            
            .envelope-border::before {
                top: -10px;
                font-size: 14px;
                letter-spacing: 6px;
                padding: 0 10px;
            }
            
            .corner1, .corner2 {
                font-size: 32px;
                top: -5px;
            }
            
            .corner3, .corner4 {
                font-size: 36px;
                bottom: 25px;
            }
            
            .envelope-small-flower {
                font-size: 20px;
            }
            
            .small1, .small2 {
                font-size: 22px;
                top: 15px;
            }
            
            .small3, .small4 {
                font-size: 24px;
                bottom: 55px;
            }
            
            .envelope-seal {
                width: 60px;
                height: 60px;
                font-size: 36px;
                top: 28%;
            }
            
            .envelope-seal::after {
                font-size: 40px;
            }
            
            .envelope-address {
                bottom: 20px;
                font-size: 14px;
                letter-spacing: 3px;
                padding: 8px 0;
            }
            
            .envelope-address span {
                padding: 8px 10px;
                font-size: 13px;
            }
            
            .letter {
                width: 220px;
                min-height: 280px;
                max-height: 400px;
                padding: 20px 18px;
                font-size: 13px;
                border-radius: 10px 10px 16px 16px;
            }
            
            .letter h3 {
                font-size: 20px;
                margin: 0 0 12px 0;
                padding-bottom: 8px;
                border-bottom: 1.5px solid #d49b7a;
            }
            
            .letter p {
                margin: 12px 0;
                font-size: 13px;
                line-height: 1.6;
            }
            
            .letter-heart-container {
                margin: 15px 0;
                height: 100px;
            }
            
            .heart-shape {
                width: 110px;
                height: 110px;
            }
            
            .heart-images {
                width: 85px;
                height: 85px;
                gap: 6px;
            }
            
            .heart-images .image-item {
                width: 38px;
                height: 38px;
                border-radius: 6px;
                border: 1.5px solid #ff4d6d;
            }
            
            .letter .heart-divider {
                font-size: 16px;
                margin: 12px 0 8px;
                letter-spacing: 8px;
            }
            
            .letter .signature {
                font-size: 14px;
                margin-top: 12px;
                padding-top: 10px;
                border-top: 1px dashed #c99979;
            }
            
            .music-toggle {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 24px;
                border: 1.5px solid #ffeec0;
                box-shadow: 0 6px 15px rgba(60, 0, 0, 0.5);
            }
            
            .music-toggle:hover {
                box-shadow: 0 8px 20px rgba(60, 0, 0, 0.7);
            }
            
            .image-gallery {
                bottom: 80px;
                right: 20px;
                gap: 15px;
            }
            
            .gallery-section {
                max-width: 150px;
                padding: 12px;
                border-radius: 12px;
                box-shadow: 0 5px 12px rgba(60, 0, 0, 0.3);
            }
            
            .gallery-label {
                font-size: 11px;
                margin-bottom: 8px;
                letter-spacing: 0.5px;
            }
            
            .image-container {
                gap: 6px;
            }
            
            .gallery-image {
                width: 60px;
                height: 60px;
                border-radius: 8px;
                border: 1.5px solid #d49b7a;
                box-shadow: 0 2px 6px rgba(60, 0, 0, 0.25);
            }
            
            .gallery-image:hover {
                transform: scale(1.08) rotate(1deg);
                box-shadow: 0 4px 10px rgba(60, 0, 0, 0.4);
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 5px;
            }
            
            .canvas-wrap {
                width: min(98vw, 350px);
            }
            
            .proposal-card {
                max-width: 90%;
                padding: 15px 20px;
            }
            
            .proposal-card h2 {
                font-size: 24px;
                margin: 0 0 10px 0;
            }
            
            .proposal-buttons {
                gap: 10px;
                flex-direction: row;
            }
            
            .btn {
                font-size: 18px;
                padding: 6px 16px;
                border-radius: 40px;
            }
            
            .mail-envelope {
                width: 200px;
                height: 160px;
                border-radius: 14px 14px 18px 18px;
            }
            
            .corner1, .corner2 {
                font-size: 28px;
                top: -3px;
            }
            
            .corner3, .corner4 {
                font-size: 32px;
                bottom: 20px;
            }
            
            .envelope-seal {
                width: 52px;
                height: 52px;
                font-size: 30px;
                top: 25%;
            }
            
            .envelope-seal::after {
                font-size: 36px;
            }
            
            .envelope-address {
                bottom: 16px;
                font-size: 12px;
                letter-spacing: 2px;
            }
            
            .envelope-address span {
                padding: 6px 8px;
                font-size: 11px;
            }
            
            .letter {
                width: 180px;
                min-height: 260px;
                max-height: 340px;
                padding: 16px 14px;
                font-size: 12px;
            }
            
            .letter h3 {
                font-size: 18px;
                margin: 0 0 10px 0;
            }
            
            .letter p {
                margin: 10px 0;
                font-size: 12px;
                line-height: 1.5;
                text-indent: 0.8em;
            }
            
            .letter-heart-container {
                margin: 12px 0;
                height: 85px;
            }
            
            .heart-shape {
                width: 95px;
                height: 95px;
            }
            
            .heart-images {
                width: 75px;
                height: 75px;
                gap: 5px;
            }
            
            .heart-images .image-item {
                width: 34px;
                height: 34px;
                border-radius: 5px;
                border: 1px solid #ff4d6d;
            }
            
            .letter .heart-divider {
                font-size: 14px;
                margin: 10px 0 6px;
                letter-spacing: 6px;
            }
            
            .letter .signature {
                font-size: 12px;
                margin-top: 10px;
                padding-top: 8px;
            }
            
            .music-toggle {
                bottom: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            
            .image-gallery {
                bottom: 70px;
                right: 15px;
                gap: 12px;
            }
            
            .gallery-section {
                max-width: 130px;
                padding: 10px;
                border-radius: 10px;
            }
            
            .gallery-label {
                font-size: 10px;
                margin-bottom: 6px;
            }
            
            .image-container {
                gap: 5px;
            }
            
            .gallery-image {
                width: 50px;
                height: 50px;
                border-radius: 6px;
            }
            
            .gallery-image:hover {
                transform: scale(1.05) rotate(0deg);
            }
            
            .envelope-gold-dot {
                width: 8px;
                height: 8px;
                box-shadow: 0 0 15px #ffcc80;
            }
        }
    </style>
</head>
<body>
    <div class="canvas-wrap">
        <canvas id="flowerCanvas" width="700" height="700"></canvas>

        <!-- üß° ORIGINAL SVG OVERLAY ‚Äì 100% UNCHANGED -->
        <svg class="overlay" width="700" height="700" viewBox="0 0 700 700" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <defs>
                <path id="arcPath" d="M100,320 A250,250 0 0,1 600,320" />
                <linearGradient id="grad" x1="0" x2="1">
                    <stop offset="0%" stop-color="#ff99cc" />
                    <stop offset="100%" stop-color="#ff3366" />
                </linearGradient>
            </defs>
            <text class="headline" font-family="Georgia, 'Times New Roman', serif" font-size="36" fill="url(#grad)">
                <textPath href="#arcPath" startOffset="50%" text-anchor="middle">Happy Valentine's Day</textPath>
            </text>
            <text class="name" x="350" y="580" font-family="Georgia, 'Times New Roman', serif" font-size="22" text-anchor="middle">EVCECLE (AKI)</text>
        </svg>

        <!-- ‚ú® PROPOSAL LAYER: "CAN YOU BE MY DATE?" with YES/NO -->
        <div id="proposalOverlay" class="proposal-overlay">
            <div class="proposal-card">
                <h2>üå∏ Can you be my date? üå∏</h2>
                <div class="proposal-buttons">
                    <button id="yesBtn" class="btn btn-yes">Yes</button>
                    <button id="noBtn" class="btn btn-no">No</button>
                </div>
                <div id="responseMsg" class="response-message"></div>
            </div>
        </div>
    </div>

    <!-- üíå MASTERPIECE ENVELOPE ‚Äì FLOWERS NOW PERFECTLY VISIBLE, NO BACKGROUND FLOWERS -->
    <div id="mailEnvelope" class="mail-envelope">
        <div class="envelope-border"></div>
        
        <!-- MAIN CORNER FLOWERS ‚Äì LARGE, BRIGHT, 100% VISIBLE, NO BACKGROUND INTERFERENCE -->
        <div class="envelope-corner-flower corner1">üåπ</div>
        <div class="envelope-corner-flower corner2">üåπ</div>
        <div class="envelope-corner-flower corner3">üå∏</div>
        <div class="envelope-corner-flower corner4">üå∏</div>
        
        <!-- EXTRA SMALL FLOWERS ‚Äì PURE DECORATION, CRYSTAL CLEAR -->
        <div class="envelope-small-flower small1">üå∑</div>
        <div class="envelope-small-flower small2">üå∑</div>
        <div class="envelope-small-flower small3">üå∫</div>
        <div class="envelope-small-flower small4">üå∫</div>
        <div class="envelope-small-flower small5">‚ú®</div>
        <div class="envelope-small-flower small6">‚ú®</div>
        <div class="envelope-small-flower small7">üåº</div>
        <div class="envelope-small-flower small8">üåº</div>
        
        <!-- GOLDEN DOTS ‚Äì SPARKLE -->
        <div class="envelope-gold-dot dot1"></div>
        <div class="envelope-gold-dot dot2"></div>
        <div class="envelope-gold-dot dot3"></div>
        <div class="envelope-gold-dot dot4"></div>
        <div class="envelope-gold-dot dot5"></div>
        <div class="envelope-gold-dot dot6"></div>
        
        <!-- WAX SEAL -->
        <div class="envelope-seal" id="envelopeSeal"></div>
        
        <!-- ADDRESS LABEL -->
        <div class="envelope-address"><span>To my Dearest Aki</span></div>
    </div>

    <!-- üíå MASTERPIECE LETTER -->
    <div id="letter" class="letter">
        <h3>My Dearest Aki,</h3>
<p>Even though we haven‚Äôt met in person yet, somehow my heart feels at home when I talk to you. From the first time we started chatting, there was something special about you. Your messages brighten my day, and your smile ‚Äî even just in pictures ‚Äî feels like sunshine in my world. I cherish every conversation we share, and I‚Äôm excited for the day we finally meet. Until then, I‚Äôm grateful for the connection we‚Äôre building, one message at a time.</p>
        <div class="heart-divider">‚ùÄ ‚ùÅ ‚ùÄ</div>
        
        <!-- üíï HEART SHAPE WITH 2 IMAGES -->
        <div class="letter-heart-container">
            <div class="heart-shape">
                <div class="heart-images">
                    <img src="mark.jpg" alt="Certificate of Achievement" class="image-item">
                    <img src="excecle.jpg" alt="Certificate of Attendance" class="image-item">
                </div>
            </div>
        </div>
        
        <div class="heart-divider" style="margin-top: 12px;">‚ùÄ ‚ùÅ ‚ùÄ</div>
        <p style="text-align:center; font-style:italic; font-size:16px;">Will you be my Valentine? Forever and always.</p>
        <div class="signature">With all my love,<br>Makoy üíñ</div>
    </div>

    <!-- üéµ BACKGROUND MUSIC -->
    <audio id="bgAudio" loop>
        <source src="https://youtu.be/fu9yk7gCTbc?si=xZg59dBBtl_lLSUG" type="audio/mpeg">
        <!-- Note: Replace the above URL with a direct link to "Tahanan by El Manu" from a music streaming service -->
        <!-- You can use: Spotify, SoundCloud, YouTube Music, or other streaming platforms that support direct audio links -->
    </audio>
    
    <!-- üéµ MUSIC TOGGLE BUTTON -->
    <button id="musicToggle" class="music-toggle" title="Click to play/pause music">üéµ</button>

    <!-- üñºÔ∏è IMAGE GALLERY SECTION -->
    <div class="image-gallery">
        <!-- Heart with 2 pictures section -->
        <div class="gallery-section">
            <div class="gallery-label">üíï Us</div>
            <div class="image-container">
                <img src="ilovepdf_pages-to-jpg/Copy-of-Certificate---MARK-S.-CAGATAN-/Copy of Certificate - MARK S. CAGATAN _page-0001.jpg" alt="Memorable Moment" class="gallery-image">
                <img src="ilovepdf_pages-to-jpg/Copy-of-Certificate---MARK-S.-CAGATAN-/Copy of Certificate - MARK S. CAGATAN _page-0001.jpg" alt="Special Memory" class="gallery-image">
            </div>
        </div>
        
        <!-- 2 people eating together section -->
        <div class="gallery-section">
            <div class="gallery-label">üçΩÔ∏è Together</div>
            <div class="image-container">
                <img src="ilovepdf_pages-to-jpg/Copy-of-Certificate---MARK-S.-CAGATAN-/Copy of Certificate - MARK S. CAGATAN _page-0001.jpg" alt="Dining Together" class="gallery-image">
                <img src="ilovepdf_pages-to-jpg/Copy-of-Certificate---MARK-S.-CAGATAN-/Copy of Certificate - MARK S. CAGATAN _page-0001.jpg" alt="Spending Time Together" class="gallery-image">
            </div>
        </div>
    </div>

    <script>
        // ---------- üåπ ORIGINAL ANIMATION SCRIPT (FULLY INTACT) ----------
        const canvas = document.getElementById('flowerCanvas');
        const ctx = canvas.getContext('2d');

        (function timedTextReveal(){
            const headline = document.querySelector('.overlay .headline');
            if (!headline) return;
            headline.classList.add('visible');
        })();
        
        const centerX = 350;
        const centerY = 350;
        const groundY = 450;
        
        let growth = 0;
        let stemHeight = 0;
        let leafSize = 0;
        let budSize = 0;
        let bloom = 0;
        let isBlooming = false;
        
        const pink = ['#ffb6c1', '#ffa5b0', '#ff949f', '#ff838e'];
        const red = ['#ff4d6d', '#ff3355', '#ff1a3c'];
        const green = ['#4a7a4a', '#3a6a3a', '#2a5a2a'];
        
        function animate() {
            ctx.clearRect(0, 0, 700, 700);
            
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, 700, 700);
            
            for(let i = 0; i < 50; i++) {
                ctx.fillStyle = `rgba(255, 220, 240, ${Math.sin(Date.now() * 0.001 + i) * 0.3 + 0.3})`;
                ctx.beginPath();
                ctx.arc((i * 27) % 700, (i * 13) % 700, 1, 0, Math.PI * 2);
                ctx.fill();
            }
            
            if (!isBlooming) {
                growth += 0.3;
                
                if (growth < 40) {
                    stemHeight = growth * 1.5;
                    leafSize = Math.max(0, (growth - 20) * 0.5);
                    budSize = Math.max(0, (growth - 30) * 0.3);
                } 
                else if (growth < 80) {
                    stemHeight = 60 + (growth - 40) * 1.2;
                    leafSize = 10 + (growth - 40) * 0.6;
                    budSize = 5 + (growth - 40) * 0.5;
                }
                else if (growth < 120) {
                    stemHeight = 160;
                    leafSize = 30;
                    budSize = 25 + (growth - 80) * 0.4;
                }
                else if (growth < 150) {
                    stemHeight = 160;
                    leafSize = 35;
                    budSize = 40;
                    bloom = (growth - 120) * 0.02;
                }
                else if (growth >= 150) {
                    isBlooming = true;
                    bloom = 1;
                    stemHeight = 160;
                    leafSize = 40;
                    budSize = 45;
                }
            }
            
            if (growth >= 200) {
                growth = 0;
                stemHeight = 0;
                leafSize = 0;
                budSize = 0;
                bloom = 0;
                isBlooming = false;
            }
            
            ctx.save();
            ctx.translate(centerX, groundY);
            ctx.scale(1.2, 0.6);
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.bezierCurveTo(-40, -20, -60, 10, 0, 30);
            ctx.bezierCurveTo(60, 10, 40, -20, 0, 0);
            ctx.fillStyle = '#2a1e1e';
            ctx.shadowBlur = 15;
            ctx.shadowColor = '#ff4d6d';
            ctx.fill();
            ctx.restore();
            
            if (stemHeight > 0) {
                ctx.beginPath();
                ctx.moveTo(centerX, groundY - 10);
                
                let swayBase = Math.sin(Date.now() * 0.0012) * 6;
                for(let i = 1; i <= 10; i++) {
                    let t = i / 10;
                    let y = groundY - 10 - (stemHeight * t);
                    let x = centerX + Math.sin(t * 2 + Date.now() * 0.0009) * (swayBase * (1 - bloom * 0.3) + 3 * Math.sin(t * 5));
                    ctx.lineTo(x, y);
                }
                
                ctx.lineWidth = 6;
                ctx.strokeStyle = green[Math.floor(stemHeight / 40) % 3];
                ctx.shadowBlur = 10;
                ctx.shadowColor = '#2a5a2a';
                ctx.stroke();
            }
            
            if (leafSize > 2) {
                ctx.save();
                ctx.translate(centerX - 10, groundY - stemHeight + 30);
                ctx.rotate(-0.6);
                ctx.beginPath();
                ctx.ellipse(0, 0, leafSize * 0.4, leafSize * 0.2, 0, 0, Math.PI * 2);
                ctx.fillStyle = green[1];
                ctx.shadowBlur = 8;
                ctx.fill();
                ctx.restore();
                
                ctx.save();
                ctx.translate(centerX + 12, groundY - stemHeight + 15);
                ctx.rotate(0.7);
                ctx.beginPath();
                ctx.ellipse(0, 0, leafSize * 0.45, leafSize * 0.22, 0, 0, Math.PI * 2);
                ctx.fillStyle = green[2];
                ctx.fill();
                ctx.restore();
            }
            
            if (budSize > 3) {
                ctx.save();
                ctx.translate(centerX, groundY - stemHeight - 15);
                
                if (!isBlooming && bloom < 0.3) {
                    ctx.beginPath();
                    ctx.moveTo(0, -budSize * 0.3);
                    ctx.bezierCurveTo(budSize * 0.4, -budSize * 0.5, 
                                    budSize * 0.5, budSize * 0.2, 
                                    0, budSize * 0.3);
                    ctx.bezierCurveTo(-budSize * 0.5, budSize * 0.2, 
                                    -budSize * 0.4, -budSize * 0.5, 
                                    0, -budSize * 0.3);
                    ctx.fillStyle = pink[Math.floor(budSize / 15) % 4];
                    ctx.shadowBlur = 20;
                    ctx.shadowColor = '#ffb6c1';
                    ctx.fill();
                } else {
                    let centerPulse = 1 + 0.04 * Math.sin(Date.now() * 0.007) * bloom;
                    ctx.save();
                    ctx.scale(centerPulse, centerPulse);
                    ctx.beginPath();
                    ctx.moveTo(0, -10);
                    ctx.bezierCurveTo(15, -20, 25, 0, 0, 15);
                    ctx.bezierCurveTo(-25, 0, -15, -20, 0, -10);
                    ctx.fillStyle = red[0];
                    ctx.shadowBlur = 25;
                    ctx.shadowColor = '#ff4d6d';
                    ctx.fill();
                    ctx.restore();
                    
                    let t = Date.now() * 0.0012;
                    for(let i = 0; i < 10; i++) {
                        let baseAngle = (i * 36) * Math.PI / 180;
                        let wiggle = Math.sin(t + i * 0.45) * 0.05 * bloom;
                        let petalLength = 65 * bloom * (1 + 0.03 * Math.sin(t * 0.8 + i));
                        let petalWidth = 32 * bloom * (1 + 0.03 * Math.cos(t * 0.7 + i * 1.05));

                        if(petalLength > 2) {
                            ctx.save();
                            ctx.rotate(baseAngle + wiggle);
                            let s = 1 + 0.03 * Math.sin(t + i * 0.35) * bloom;
                            ctx.scale(s, s);
                            ctx.beginPath();
                            ctx.moveTo(0, 0);
                            ctx.quadraticCurveTo(petalLength * 0.5, -petalWidth * 0.7, petalLength, 0);
                            ctx.quadraticCurveTo(petalLength * 0.5, petalWidth * 0.7, 0, 0);
                            ctx.fillStyle = pink[i % 4];
                            ctx.globalAlpha = Math.min(1, bloom * 0.98 + 0.02);
                            ctx.fill();
                            ctx.restore();
                        }
                    }
                }
                ctx.restore();
            }
            
            if (isBlooming) {
                let time = Date.now() * 0.0007;
                for(let i = 0; i < 10; i++) {
                    let x = (i * 70 + Math.sin(time + i) * 120 + 700) % 700;
                    let y = ((time * 120) + i * 40) % 700;

                    ctx.save();
                    ctx.translate(x, y);
                    ctx.rotate(Math.sin(time + i) * 0.6);
                    ctx.beginPath();
                    ctx.moveTo(0, -3);
                    ctx.bezierCurveTo(5, -6, 8, -1, 0, 4);
                    ctx.bezierCurveTo(-8, -1, -5, -6, 0, -3);
                    ctx.fillStyle = `rgba(255, 105, 180, 0.32)`;
                    ctx.shadowBlur = 8;
                    ctx.shadowColor = '#ff99aa';
                    ctx.fill();
                    ctx.restore();
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();

        // ---------- CONFETTI ----------
        function launchConfetti() {
            const canvas = document.createElement('canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            canvas.style.position = 'fixed';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.pointerEvents = 'none';
            canvas.style.zIndex = '1000';
            document.body.appendChild(canvas);

            const ctx = canvas.getContext('2d');
            let particles = [];
            const colors = ['#ff4d6d', '#ffb6c1', '#ffe0f0', '#ff99cc', '#ff3366'];

            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    vx: (Math.random() - 0.5) * 10,
                    vy: Math.random() * 5 + 5,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 5 + 2
                });
            }

            function animateConfetti() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.1;
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                });
                particles = particles.filter(p => p.y < canvas.height);
                if (particles.length > 0) {
                    requestAnimationFrame(animateConfetti);
                } else {
                    document.body.removeChild(canvas);
                }
            }
            animateConfetti();
        }

        // ---------- PROPOSAL MODULE ‚Äì ENVELOPE WITH PERFECTLY VISIBLE FLOWERS ----------
        (function proposalModule() {
            const proposalEl = document.getElementById('proposalOverlay');
            const responseEl = document.getElementById('responseMsg');
            const yesBtn = document.getElementById('yesBtn');
            const noBtn = document.getElementById('noBtn');
            const mailEnvelope = document.getElementById('mailEnvelope');
            const letter = document.getElementById('letter');
            const seal = document.getElementById('envelopeSeal');
            
            // üéµ MUSIC CONTROL
            const bgAudio = document.getElementById('bgAudio');
            const musicToggle = document.getElementById('musicToggle');
            let isPlaying = false;
            
            musicToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                if (isPlaying) {
                    bgAudio.pause();
                    musicToggle.classList.remove('playing');
                    musicToggle.textContent = 'üéµ';
                    isPlaying = false;
                } else {
                    bgAudio.play().catch(err => console.log('Audio play failed:', err));
                    musicToggle.classList.add('playing');
                    musicToggle.textContent = 'üé∂';
                    isPlaying = true;
                }
            });
            
            // fade in proposal after 10s
            setTimeout(() => {
                proposalEl.classList.add('show');
            }, 10000);

            // ‚úÖ YES: show the ENVELOPE with CRYSTAL CLEAR VISIBLE FLOWERS
            yesBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                responseEl.innerHTML = 'üíñ Yay! It‚Äôs a date! Can‚Äôt wait! üíñ';
                responseEl.style.color = '#ffe6f0';
                responseEl.style.textShadow = '0 0 15px #ff8cb0';
                
                // üíå show the envelope immediately
                mailEnvelope.classList.add('show');
                // ensure it's in closed state
                mailEnvelope.classList.remove('open');
                
                // confetti celebration
                launchConfetti();
                
                // fade out proposal overlay
                setTimeout(() => {
                    proposalEl.classList.add('fade-out');
                }, 1800);
            });

            // NO button playful
            let noClickCount = 0;
            noBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                noClickCount++;
                if (noClickCount === 1) {
                    responseEl.innerHTML = 'ü•∫ Are you sure? Click again‚Ä¶ üíî';
                } else if (noClickCount === 2) {
                    responseEl.innerHTML = 'üåπ I think your heart says Yes! ü•∞';
                } else if (noClickCount === 3) {
                    responseEl.innerHTML = 'Okay, I‚Äôll take that as a Yes! üíò';
                } else if (noClickCount === 4) {
                    responseEl.innerHTML = 'üíû YES it is! Forever date! üíû';
                } else if (noClickCount === 5) {
                    responseEl.innerHTML = 'Aki naman‚Ä¶ üò≠';
                } else if (noClickCount === 6) {
                    responseEl.innerHTML = 'üå∏ Please say yes! ü•∫';
                } else if (noClickCount === 7) {
                    responseEl.innerHTML = 'üíñ I love you! üíñ';
                } else {
                    moveButtonAway(noBtn);
                    responseEl.innerHTML = 'üíï Try again! üíï';
                }
            });

            function moveButtonAway(button) {
                const container = button.parentElement;
                const containerRect = container.getBoundingClientRect();
                const buttonRect = button.getBoundingClientRect();
                let newLeft, newTop;
                do {
                    newLeft = Math.random() * (containerRect.width - buttonRect.width);
                    newTop = Math.random() * (containerRect.height - buttonRect.height);
                } while (Math.abs(newLeft - button.offsetLeft) < 50 && Math.abs(newTop - button.offsetTop) < 50);
                button.style.position = 'absolute';
                button.style.left = newLeft + 'px';
                button.style.top = newTop + 'px';
            }

            yesBtn.addEventListener('click', function() {
                noClickCount = 0;
            });

            // ---------- ENVELOPE OPEN/CLOSE TOGGLE ----------
            function toggleEnvelope() {
                if (mailEnvelope.classList.contains('open')) {
                    // close it with fade-out
                    letter.classList.add('closing');
                    setTimeout(() => {
                        mailEnvelope.classList.remove('open');
                        letter.classList.remove('show');
                        letter.classList.remove('closing');
                    }, 700);
                } else {
                    // open it
                    mailEnvelope.classList.add('open');
                    // show letter
                    setTimeout(() => {
                        letter.classList.add('show');
                    }, 180);
                }
            }

            // Wax seal toggles
            seal.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleEnvelope();
            });

            // Click on envelope background or decorations toggles
            mailEnvelope.addEventListener('click', function(e) {
                if (e.target === mailEnvelope || 
                    e.target.classList.contains('mail-envelope') || 
                    e.target.classList.contains('envelope-address') ||
                    e.target.classList.contains('envelope-border') ||
                    e.target.classList.contains('envelope-corner-flower') ||
                    e.target.classList.contains('envelope-small-flower') ||
                    e.target.classList.contains('envelope-gold-dot')) {
                    toggleEnvelope();
                }
            });

            // Letter click closes the envelope
            letter.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleEnvelope();
            });

        })();
    </script>
</body>
</html>